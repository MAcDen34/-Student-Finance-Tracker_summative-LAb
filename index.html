<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Student Finance Tracker — track your campus spending with smart categories, regex search, and budget caps.">
  <title>UniWallet | Student Finance Tracker</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
 
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <header class="site-header" role="banner">
    <div class="header-inner">
      <div class="logo-group">
        <span class="logo-icon" aria-hidden="true">&#x1F4B5;</span>
        <h1 class="logo-text"><span class="logo-accent">UniWallet</span></h1>
      </div>
      <nav class="main-nav" aria-label="Main navigation">
        <ul class="nav-list" role="list">
          <li><a href="#dashboard-section" class="nav-link active" data-nav="dashboard">Dashboard</a></li>
          <li><a href="#records-section" class="nav-link" data-nav="records">Records</a></li>
          <li><a href="#add-section" class="nav-link" data-nav="add">Add New</a></li>
          <li><a href="#settings-section" class="nav-link" data-nav="settings">Settings</a></li>
          <li><a href="#about-section" class="nav-link" data-nav="about">About</a></li>
        </ul>
      </nav>
      <button class="mobile-menu-btn" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="mobile-nav-drawer">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      <button class="theme-toggle-btn" aria-label="Toggle dark mode" title="Toggle dark mode">
        <span class="theme-icon-light" aria-hidden="true">&#9788;</span>
        <span class="theme-icon-dark" aria-hidden="true">&#9790;</span>
      </button>
    </div>
  
    <div id="mobile-nav-drawer" class="mobile-drawer" aria-hidden="true">
      <nav aria-label="Mobile navigation">
        <ul class="mobile-nav-list" role="list">
          <li><a href="#dashboard-section" class="mobile-nav-link" data-nav="dashboard">Dashboard</a></li>
          <li><a href="#records-section" class="mobile-nav-link" data-nav="records">Records</a></li>
          <li><a href="#add-section" class="mobile-nav-link" data-nav="add">Add New</a></li>
          <li><a href="#settings-section" class="mobile-nav-link" data-nav="settings">Settings</a></li>
          <li><a href="#about-section" class="mobile-nav-link" data-nav="about">About</a></li>
        </ul>
      </nav>
    </div>
  </header>

  
  <main id="main-content" class="main-wrapper">


    <div id="live-status" class="sr-only" role="status" aria-live="polite"></div>
    <div id="live-alert" class="sr-only" role="alert" aria-live="assertive"></div>

  
    <section id="dashboard-section" class="page-section active" aria-labelledby="dashboard-heading">
      <div class="section-header">
        <h2 id="dashboard-heading" class="section-title">Dashboard</h2>
        <p class="section-subtitle">Your spending at a glance</p>
      </div>

   
      <div class="stats-grid">
        <div class="stat-card" id="stat-total-records">
          <span class="stat-label">Total Records</span>
          <span class="stat-value" id="stat-count">0</span>
        </div>
        <div class="stat-card" id="stat-total-spent">
          <span class="stat-label">Total Spent</span>
          <span class="stat-value" id="stat-sum">$0.00</span>
        </div>
        <div class="stat-card" id="stat-top-category">
          <span class="stat-label">Top Category</span>
          <span class="stat-value" id="stat-top-cat">—</span>
        </div>
        <div class="stat-card" id="stat-average">
          <span class="stat-label">Average</span>
          <span class="stat-value" id="stat-avg">$0.00</span>
        </div>
      </div>

    
      <div class="budget-cap-card">
        <h3 class="cap-title">Monthly Budget Cap</h3>
        <div class="cap-bar-wrapper">
          <div class="cap-bar">
            <div class="cap-bar-fill" id="cap-bar-fill" style="width: 0%"></div>
          </div>
          <div class="cap-labels">
            <span id="cap-spent-label">$0.00 spent</span>
            <span id="cap-limit-label">of $0.00</span>
          </div>
        </div>
        <p class="cap-message" id="cap-message" aria-live="polite">Set a budget cap in Settings.</p>
      </div>


      <div class="chart-card">
        <h3 class="chart-title">Last 7 Days</h3>
        <div class="chart-container" id="trend-chart" role="img" aria-label="Bar chart showing spending over the last 7 days">
         
        </div>
      </div>

    
      <div class="breakdown-card">
        <h3 class="breakdown-title">By Category</h3>
        <div class="breakdown-list" id="category-breakdown">
        
        </div>
      </div>
    </section>

  
    <section id="records-section" class="page-section" aria-labelledby="records-heading">
      <div class="section-header">
        <h2 id="records-heading" class="section-title">Records</h2>
        <p class="section-subtitle">All your transactions</p>
      </div>

     
      <div class="toolbar">
        <div class="search-group">
          <label for="search-input" class="sr-only">Search records (supports regex)</label>
          <input type="text" id="search-input" class="search-input" placeholder="Search or type regex pattern..." autocomplete="off">
          <div class="search-options">
            <label class="checkbox-label">
              <input type="checkbox" id="search-case-toggle" checked>
              <span>Case insensitive</span>
            </label>
          </div>
          <p class="search-hint" id="search-hint" aria-live="polite"></p>
        </div>
        <div class="sort-group">
          <label for="sort-select" class="sr-only">Sort records by</label>
          <select id="sort-select" class="sort-select">
            <option value="date-desc">Date (newest)</option>
            <option value="date-asc">Date (oldest)</option>
            <option value="desc-asc">Description (A→Z)</option>
            <option value="desc-desc">Description (Z→A)</option>
            <option value="amount-desc">Amount (high→low)</option>
            <option value="amount-asc">Amount (low→high)</option>
          </select>
        </div>
      </div>


      <div class="table-wrapper" role="region" aria-label="Records table" tabindex="0">
        <table class="records-table" id="records-table">
          <thead>
            <tr>
              <th scope="col" class="sortable" data-sort="date">Date</th>
              <th scope="col" class="sortable" data-sort="description">Description</th>
              <th scope="col" class="sortable" data-sort="amount">Amount</th>
              <th scope="col">Category</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody id="records-tbody">
            
          </tbody>
        </table>
      </div>


      <div class="records-cards" id="records-cards" aria-label="Records list">
       
      </div>

      <p class="empty-state" id="empty-state" style="display:none;">No records yet. Add your first transaction!</p>
    </section>


    <section id="add-section" class="page-section" aria-labelledby="add-heading">
      <div class="section-header">
        <h2 id="add-heading" class="section-title">Add Transaction</h2>
        <p class="section-subtitle" id="form-subtitle">Log a new expense</p>
      </div>

      <form id="transaction-form" class="entry-form" novalidate>
        <input type="hidden" id="edit-id" value="">

        <div class="form-group">
          <label for="field-description" class="form-label">Description <span class="required" aria-label="required">*</span></label>
          <input type="text" id="field-description" class="form-input" placeholder="e.g. Lunch at cafeteria" required aria-describedby="desc-error desc-help">
          <small id="desc-help" class="form-help">No leading/trailing spaces; no duplicate consecutive words.</small>
          <span id="desc-error" class="form-error" role="alert"></span>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="field-amount" class="form-label">Amount (<span id="currency-symbol">$</span>) <span class="required" aria-label="required">*</span></label>
            <input type="text" id="field-amount" class="form-input" placeholder="0.00" inputmode="decimal" required aria-describedby="amount-error amount-help">
            <small id="amount-help" class="form-help">Positive number, up to 2 decimals.</small>
            <span id="amount-error" class="form-error" role="alert"></span>
          </div>
          <div class="form-group">
            <label for="field-date" class="form-label">Date <span class="required" aria-label="required">*</span></label>
            <input type="text" id="field-date" class="form-input" placeholder="YYYY-MM-DD" required aria-describedby="date-error date-help">
            <small id="date-help" class="form-help">Format: YYYY-MM-DD</small>
            <span id="date-error" class="form-error" role="alert"></span>
          </div>
        </div>

        <div class="form-group">
          <label for="field-category" class="form-label">Category <span class="required" aria-label="required">*</span></label>
          <select id="field-category" class="form-input" required aria-describedby="cat-error">
            <option value="">Select a category</option>
         
          </select>
          <span id="cat-error" class="form-error" role="alert"></span>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary" id="form-submit-btn">Add Transaction</button>
          <button type="button" class="btn btn-secondary" id="form-cancel-btn" style="display:none;">Cancel Edit</button>
        </div>
      </form>
    </section>


    <section id="settings-section" class="page-section" aria-labelledby="settings-heading">
      <div class="section-header">
        <h2 id="settings-heading" class="section-title">Settings</h2>
        <p class="section-subtitle">Customize your tracker</p>
      </div>

   
      <div class="settings-card">
        <h3 class="settings-card-title">Currency</h3>
        <div class="form-group">
          <label for="base-currency" class="form-label">Base Currency</label>
          <select id="base-currency" class="form-input">
            <option value="USD">USD ($)</option>
            <option value="EUR">EUR (&#8364;)</option>
            <option value="RWF">RWF (FRw)</option>
          </select>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="rate-eur" class="form-label">1 USD &#8594; EUR</label>
            <input type="text" id="rate-eur" class="form-input" value="0.92" aria-describedby="rate-eur-help">
            <small id="rate-eur-help" class="form-help">Manual exchange rate</small>
          </div>
          <div class="form-group">
            <label for="rate-rwf" class="form-label">1 USD &#8594; RWF</label>
            <input type="text" id="rate-rwf" class="form-input" value="1380" aria-describedby="rate-rwf-help">
            <small id="rate-rwf-help" class="form-help">Manual exchange rate</small>
          </div>
        </div>
        <div class="converted-display" id="converted-display" aria-live="polite" style="display:none;">
         
        </div>
      </div>

   
      <div class="settings-card">
        <h3 class="settings-card-title">Monthly Budget Cap</h3>
        <div class="form-group">
          <label for="budget-cap" class="form-label">Budget Limit</label>
          <input type="text" id="budget-cap" class="form-input" placeholder="e.g. 500" aria-describedby="cap-help">
          <small id="cap-help" class="form-help">Set a monthly spending limit (in base currency).</small>
        </div>
        <button type="button" class="btn btn-primary" id="save-cap-btn">Save Cap</button>
      </div>

   
      <div class="settings-card">
        <h3 class="settings-card-title">Categories</h3>
        <div class="category-tags" id="category-tags">
        
        </div>
        <div class="form-row" style="margin-top: 0.75rem;">
          <div class="form-group" style="flex:1">
            <label for="new-category" class="form-label">Add Category</label>
            <input type="text" id="new-category" class="form-input" placeholder="e.g. Groceries" aria-describedby="new-cat-error new-cat-help">
            <small id="new-cat-help" class="form-help">Letters, spaces, hyphens only.</small>
            <span id="new-cat-error" class="form-error" role="alert"></span>
          </div>
          <button type="button" class="btn btn-primary" id="add-cat-btn" style="align-self:center; margin-top:0.5rem;">Add</button>
        </div>
      </div>

    
      <div class="settings-card">
        <h3 class="settings-card-title">Data</h3>
        <div class="data-actions">
          <button type="button" class="btn btn-secondary" id="export-btn">Export JSON</button>
          <button type="button" class="btn btn-secondary" id="export-csv-btn">Export CSV</button>
          <label class="btn btn-secondary import-label" tabindex="0" role="button" aria-label="Import JSON file">
            Import JSON
            <input type="file" id="import-input" accept=".json" class="sr-only">
          </label>
          <button type="button" class="btn btn-danger" id="clear-all-btn">Clear All Data</button>
        </div>
        <p class="import-status" id="import-status" role="status" aria-live="polite"></p>
      </div>
    </section>

   
    <section id="about-section" class="page-section" aria-labelledby="about-heading">
      <div class="section-header">
        <h2 id="about-heading" class="section-title">About</h2>
        <p class="section-subtitle">UniWallet: Student Finance Tracker</p>
      </div>

      <div class="about-content">
        <div class="about-card">
          <h3>What is UniWallet?</h3>
          <p>UniWallet is a lightweight offline first finance tracker built for students. It helps you log daily expenses, set monthly budgets and see where your money goes,all without needing an internet connection or creating an account.</p>
          <p>Your data lives entirely in your browser's local storage. Nothing gets sent to any server ever.</p>
        </div>

        <div class="about-card">
          <h3>Features</h3>
          <p>Smart regex powered search so you can find exactly what you need. Category based breakdowns of your spending. A 7 day trend chart to spot patterns. Budget caps with real-time alerts when you're close to  or over your limit. Full keyboard navigation and screen reader support throughout.</p>
        </div>

        <div class="about-card">
          <h3>Regex Catalog</h3>
          <dl class="regex-catalog">
            <dt><code>/^\S(?:.*\S)?$/</code></dt>
            <dd>No leading/trailing spaces in descriptions</dd>
            <dt><code>/^(0|[1-9]\d*)(\.\d{1,2})?$/</code></dt>
            <dd>Valid amount: positive number with up to 2 decimal places</dd>
            <dt><code>/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/</code></dt>
            <dd>Date format YYYY-MM-DD with valid month/day ranges</dd>
            <dt><code>/^[A-Za-z]+(?:[ -][A-Za-z]+)*$/</code></dt>
            <dd>Category: letters, single spaces, or hyphens between words</dd>
            <dt><code>/\b(\w+)\s+\1\b/i</code></dt>
            <dd>Advanced: detects duplicate consecutive words (back-reference)</dd>
            <dt><code>/(?=.*[A-Z])(?=.*\d).{6,}/</code></dt>
            <dd>Advanced: lookahead — at least 1 uppercase and 1 digit, 6+ chars</dd>
          </dl>
        </div>

        <div class="about-card">
          <h3>Keyboard Shortcuts</h3>
          <dl class="keyboard-map">
            <dt><kbd>Tab</kbd> / <kbd>Shift+Tab</kbd></dt>
            <dd>Navigate through interactive elements</dd>
            <dt><kbd>Enter</kbd></dt>
            <dd>Activate buttons and links</dd>
            <dt><kbd>Escape</kbd></dt>
            <dd>Close mobile menu or cancel edit mode</dd>
            <dt><kbd>1</kbd>&#8211;<kbd>5</kbd></dt>
            <dd>Quick navigate sections (when not in a text field)</dd>
          </dl>
        </div>

        <div class="about-card">
          <h3>Contact</h3>
          <p>Built by <strong>Denzel NGABO</strong></p>
          <p>GitHub: <a href="https://github.com/MAcDen34" target="_blank" rel="noopener noreferrer">github.com/MAcDen34</a></p>
          <p>Email: <a href="mailto:d.ngabo@alustudent.com">d.ngabo@alustudent.com</a></p>
        </div>
      </div>
    </section>

  </main>


 <footer class="site-footer" role="contentinfo">
  <p>&#169; <script>document.write(new Date().getFullYear())</script> UniWallet.</p>
</footer>

  
  <div class="modal-overlay" id="delete-modal" aria-hidden="true" role="dialog" aria-labelledby="delete-modal-title" aria-describedby="delete-modal-desc">
    <div class="modal-box" role="document">
      <h3 id="delete-modal-title">Confirm Delete</h3>
      <p id="delete-modal-desc">Are you sure you want to delete this transaction? This cannot be undone.</p>
      <div class="modal-actions">
        <button class="btn btn-danger" id="confirm-delete-btn">Delete</button>
        <button class="btn btn-secondary" id="cancel-delete-btn">Cancel</button>
      </div>
    </div>
  </div>

  
  <script src="scripts/storage.js"></script>
  <script src="scripts/validators.js"></script>
  <script src="scripts/state.js"></script>
  <script src="scripts/search.js"></script>
  <script src="scripts/ui.js"></script>
  <script src="scripts/app.js"></script>
</body>
</html>
